<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_invoice_document" inherit_id="account.report_invoice_document">
        <xpath expr="//table[hasclass('o_main_table')]/thead//th[@name='th_description']" position="before">
            <th name="th_default_code" class="text-left">
                <span>Code</span>
            </th>
        </xpath>

        <xpath expr="//table[hasclass('o_main_table')]/thead//th[@name='th_quantity']" position="after">
            <th name="uom" class="text-center" groups="uom.group_uom">
                <span>UOM</span>
            </th>
        </xpath>

        <xpath expr="//table[hasclass('o_main_table')]/tbody//tr//td[@name='account_invoice_line_name']"
               position="before">
            <td>
                <span t-field="line.product_id.default_code"/>
            </td>
        </xpath>



        <xpath expr="//table[hasclass('o_main_table')]/tbody//tr/t[@name='account_invoice_line_accountable']//span[@t-field='line.product_uom_id']/.."
               position="after">
            <td class="text-center" groups="uom.group_uom">
                <span t-field="line.product_uom_id" groups="uom.group_uom"/>
            </td>
        </xpath>

         <xpath expr="//table[hasclass('o_main_table')]/tbody//tr/t[@name='account_invoice_line_accountable']//span[@t-field='line.product_uom_id']"
               position="replace">
        </xpath>

        <xpath expr="//table[hasclass('o_main_table')]" position="before">
            <t t-set="display_tax" t-value="any(l.tax_ids for l in o.invoice_line_ids)"/>
        </xpath>

        <xpath expr="//table[hasclass('o_main_table')]/thead//th[@name='th_taxes']" position="replace">
            <th name="th_taxes" t-if="display_tax"
                t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span>Taxes</span>
            </th>
        </xpath>

        <xpath expr="//table[hasclass('o_main_table')]/tbody//tr/t[@name='account_invoice_line_accountable']//span[@id='line_tax_ids']/.."
               position="replace">
            <td t-if="display_tax"
                t-attf-class="text-left {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_ids))" id="line_tax_ids"/>
            </td>

        </xpath>

    </template>
</odoo>